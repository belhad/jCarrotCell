/*!
 * jCarrotCell
 * http://jcarrotcell.yujulia.com
 * 
 * Copyright 2011, 2015 
 * Released under the MIT license
 *
 */
!function(e){var t=37,n=39,s=38,a=40,o=80,r=200,i="carrotcell",l=i+"__api",u=i+"__enum",c=i+"--on",d=i+"--vertical",p=i+"--invisible",f=i+"__clip",v=i+"__strip",y=i+"__item",h=i+"__clone",C=i+"__accessText",w=i+"__navi",m=i+"__dot",b=i+"__icon",k=b+"--next",g=b+"--prev",x=b+"--pause",T=b+"--play",P=b+"--dot",I=i+"__btn",z=I+"--next",_=I+"--prev",O=I+"--pause",D=I+"--play",N=I+"--dot",B={show:1,scroll:1,duration:500,sideways:!0,easing:"swing",infinite:!1,auto:!1,autoDuration:2e3,stopOnHover:!0,controlOnHover:!1,dotsOnHover:!1,useDots:!1,naviClass:"",dotClass:"",dotIconClass:P,dotButtonClass:"",dotText:"item set ",onClass:c,usePausePlay:!0,pauseClass:"",pauseIconClass:x,pauseText:"pause auto scroll",playClass:"",playIconClass:T,playText:"resume auto scroll",usePrevNext:!0,prevClass:"",prevIconClass:g,prevText:"next item set",nextClass:"",nextIconClass:k,nextText:"previous item set",key:!1,keyBack:"",keyForward:"",keyToggle:o,broke:!1,breakpoints:[]},S=function(e,t){var n=null;return function(){var s=this,a=arguments,o=function(){n=null,e.apply(s,a)};clearTimeout(n),n=setTimeout(o,t)}},j=function(e){return e===parseInt(e,10)?!0:!1},E=function(e,t){var n=e.indexOf(t);return 0>n?!1:!0},H=function(){var o=null,l=0,k=0,g=null,x=null,T=null,P=null,S=0,H=null,K=!1,R=null,L=null,A=null,q=null,M=e(),U=[],W=0,J=0,Q=0,V=!1,G=!0,X=!1,Y=1,Z=0,$=!1,ee=!1,te=null,ne=null,se=0,ae=[],oe=!1,re=!1,ie="x",le="width",ue=!1,ce=!1,de=null,pe={},fe={},ve={},ye=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(ve.name),F.error.apply(null,e),!1},he=function(e){var t='"'+e+'" is not a valid index. Please use a integer between 0 and '+S;return j(e)?0>e?ye(t):e>=S?ye(t):!0:ye(t)},Ce=function(t,n){if(null===t||"string"!=typeof t&&"object"!=typeof t)return ye("Unable to insert that kind of item. Please use a string or jquery object");he(n)||(n=S-1);var s=e("<div/>").append(t),a=s.children();return a.addClass(y).attr("tabindex",0),n===S-1?(a.insertAfter(P[S-1]),n++):a.insertBefore(P[n]),$e(),ze(n),n},we=function(t,n){var s=function(t){var n=function(){t.remove(),$e()};oe?e(t).velocity("fadeOut",{duration:250,complete:n}):e(t).fadeOut("fast",n)};if(he(t)){if(n&&he(n)){if(n===t)return s(e(P[t])),t;if(t>n){var a=n;n=t,t=a}for(var o=e(),r=t;n>=r;r++)o=o.add(P[r]);return s(o),[t,n]}return s(e(P[t])),t}return!1},me=function(){G?(R.prop("disabled",!0),L.prop("disabled")&&L.prop("disabled",!1)):X?(L.prop("disabled",!0),R.prop("disabled")&&R.prop("disabled",!1)):(R.prop("disabled")&&R.prop("disabled",!1),L.prop("disabled")&&L.prop("disabled",!1))},be=function(t){ne.removeClass(ve.onClass);var n=function(t){var n=ae.indexOf(t);e(ne[n]).addClass(ve.onClass)};t.forEach(n)},ke=function(e){if(e)return U;var t=U.map(function(e){return 0>e?S+e:e>=S?S-e:e});return t},ge=function(){$=!1,ee=!1,G=!1,X=!1;for(var e=[],t=0;t<ve.show;t++)U[t]=W+t,U[t]<=0&&(G=!0),U[t]>=S-1&&(X=!0),U[t]<0&&($=!0),U[t]>S-1&&(ee=!0);if(ve.useDots&&ae.length){for(var n=ke(),s=0;s<ve.show;s++)E(ae,n[s])&&e.push(n[s]);be(e)}},xe=function(t){var n={axis:ie,container:g,duration:ve.speed,easing:ve.easing};if(e.extend(n,t),oe)x.velocity("scroll",n);else{var s={scrollTop:n.offset};ve.sideways&&(s={scrollLeft:n.offset}),g.animate(s,n.duration,n.easing,n.complete)}},Te=function(){re=!0,W=S+W,J=ve.show+W,xe({duration:0,offset:J*H.totalSize}),ge(),re=!1},Pe=function(e){re=!0,W=U[0]-S,J=ve.show+W,xe({duration:0,offset:J*H.totalSize}),ge(),re=!1},Ie=function(e){j(e)?W=e:W+=Y*Q,J+=Y*Q,ge(),ve.infinite?$?(Y=-1,Te()):ee&&(Y=1,Pe()):me(),re=!1,console.log("===========================",U," current ",W)},ze=function(e){if(re=!0,j(e)){var t=ke()[0];if(t===e)return ye(e," is currently shown.");t>e?(Y=-1,Q=t-e):(!ve.infinite&&e>Z&&(e=Z),Y=1,Q=e-t)}else if(ve.infinite)Q=ve.scroll;else{var n=ve.scroll*Y+J;Q=n>Z?ve.scroll-(n-Z):0>n?ve.scroll+n:ve.scroll}var s={offset:Y*Q*H.totalSize+J*H.totalSize,complete:Ie.bind(this,e)};xe(s)},_e=function(e){return he(e)?(ze(e),e):!1},Oe=function(e){return e&&e.preventDefault(),G&&!ve.infinite||re?!1:(Y=-1,$&&Te(),void ze())},De=function(e){return e&&e.preventDefault(),X&&!ve.infinite||re?!1:(Y=1,ee&&Pe(),void ze())},Ne=function(){de&&clearTimeout(de),de=setTimeout(Se,ve.autoDuration)},Be=function(){de&&clearTimeout(de)},Se=function(){ce||De(),ue&&Ne()},je=function(){ue=!ue,ue?(ve.usePausePlay&&q&&(q.prop("disabled",!0).hide(),A.prop("disabled",!1).show().focus()),Ne()):(ve.usePausePlay&&q&&(A.prop("disabled",!0).hide(),q.prop("disabled",!1).show().focus()),Be())},Ee=function(e){return j(e)?(e===ve.keyBack&&Oe(),e===ve.keyForward&&De(),e===ve.keyToggle&&je(),!0):ye(e," is not a valid key. Please use an integer keycode.")},He=function(){var e=null,t=null,n=function(){ve.controlOnHover&&M.removeClass(p),ve.dotsOnHover&&te.removeClass(p),ce=!0},s=function(){ve.controlOnHover&&M.addClass(p).blur(),ve.dotsOnHover&&te.addClass(p).blur(),ce=!1},a=function(){e&&clearTimeout(e),t&&clearTimeout(t)},i=function(){a(),e=setTimeout(n,r)},l=function(){a(),t=setTimeout(s,r)};s(),o.hover(i,l)},Fe=function(){var t=e("<span/>",{"class":ve.prevIconClass,"aria-hidden":"true"}),n=e("<span/>",{"class":ve.nextIconClass,"aria-hidden":"true"}),s=e("<span/>",{"class":C,text:ve.prevText}),a=e("<span/>",{"class":C,text:ve.nextText});R=e("<button/>",{"class":ve.prevClass}),L=e("<button/>",{"class":ve.nextClass}),R.append(t).append(s),L.append(a).append(n),G&&!ve.infinite&&R.prop("disabled",!0),R.click(Oe),L.click(De),o.prepend(L).prepend(R),M=M.add(R).add(L)},Ke=function(){var t=e("<span/>",{"class":ve.pauseIconClass,"aria-hidden":"true"}),n=e("<span/>",{"class":ve.playIconClass,"aria-hidden":"true"}),s=e("<span/>",{"class":C,text:ve.pauseText}),a=e("<span/>",{"class":C,text:ve.playText});A=e("<button/>",{"class":ve.pauseClass}),q=e("<button/>",{"class":ve.playClass}),A.append(t).append(s),q.append(n).append(a);var r=e().add(q).add(A),i=function(){r.blur()};q.click(je),A.click(je),r.mouseleave(i),o.prepend(A).prepend(q),M=M.add(q).add(A)},Re=function(t){t&&t.preventDefault();var n=e(this).data(u);return W===n?!1:(ze(n),ne.removeClass(c),void e(this).addClass(c))},Le=function(){var t=e("."+w,o);t.length&&t.remove(),ae=[],te=e("<ol/>",{"class":w});for(var n=null,s=0;se>s;s++){var a=s*ve.scroll;if(n!==a){var r=e("<li/>",{"class":ve.dotClass}),i=e("<button/>",{"class":ve.dotButtonClass}),l=e("<span/>",{"class":ve.dotIconClass,"aria-hidden":"true"}),c=e("<span/>",{"class":C,text:ve.dotText+s});i.data(u,a).append(l).append(c),i.click(Re),r.append(i),te.append(r),ae.push(a),n=a}}ne=e("."+N,te),o.prepend(te),ge()},Ae=function(){(ve.usePrevNext||ve.usePausePlay)&&M.prop("disabled",!0),ve.useDots&&ne.prop("disabled",!0)},qe=function(){(ve.usePrevNext||ve.usePausePlay)&&M.prop("disabled",!1),ve.useDots&&ne.prop("disabled",!1)},Me=function(){if(ve.usePrevNext&&Fe(),ve.key){var e=[ve.name];ve.usePrevNext&&(e.push(ve.keyBack),e.push(ve.keyForward)),ve.usePausePlay&&e.push(ve.keyToggle),F.subscribeKey(e)}ve.useDots&&Le(),ve.auto&&(ve.usePausePlay&&Ke(),je()),F.touch||He()},Ue=function(){de&&(clearTimeout(de),de=null),(ve.usePrevNext||ve.usePausePlay)&&(M.remove(),M=e()),ve.useDots&&te.remove(),ve.key&&F.unsubscribeKeys(ve.name)},We=function(t){var n={};return e.each(t[0].attributes,function(e,t){n[t.nodeName]=t.nodeValue}),n},Je=function(t){var n=0;if(ve.sideways){var s=parseInt(t.css("margin-left"),10),a=parseInt(t.css("margin-right"),10);n=s+a}else{var o=parseInt(t.css("margin-top"),10),r=parseInt(t.css("margin-bottom"),10);n=o+r}if("content-box"===e(t).css("box-sizing"))if(ve.sideways){var i=parseInt(t.css("border-left-width"),10),l=parseInt(t.css("border-right-width"),10);n+=i+l}else{var u=parseInt(t.css("border-top-width"),10),c=parseInt(t.css("border-bottom-width"),10);n+=u+c}return{w:t.outerWidth(!0),h:t.outerHeight(!0),offset:n}},Qe=function(){var e=ve.sideways?l/ve.show:k/ve.show;H.totalSize=e,H.size=e-H.offset,P.css(le,H.size+"px")},Ve=function(){var e=S;ve.infinite&&(T.css(le,H.size+"px"),e+=2*ve.show),x.css(le,H.totalSize*e+"px")},Ge=function(){ve.infinite&&Ye(),Qe(),Ve(),ve.infinite&&xe({duration:0,offset:ve.show*H.totalSize})},Xe=function(){et();var t=ot();if(e.isEmptyObject(t))if(broke)broke=!1,at(pe);else if(Ge(),ve.infinite)xe({duration:0,offset:(W+ve.show)*H.totalSize});else{if(0===U[0])return!1;xe({duration:0,offset:W*H.totalSize})}else broke=!0,at(t);return!0},Ye=function(){e("."+h,x).remove();var t=P.slice(-1*ve.show).clone(),n=P.slice(0,ve.show).clone();t.addClass(h).attr("tabindex",-1),n.addClass(h).attr("tabindex",-1),P.filter(":first").before(t),P.filter(":last").after(n),P=e("."+y+":not(."+h+")",o),T=e("."+h,o),J=ve.show},Ze=function(){se=Math.ceil(S/ve.scroll),Z=S-ve.show,ge(),se>1&&(V=!0),console.log("sets ",se," first of end ",Z," total ",S," show ",ve.show,U)},$e=function(){P=e("."+y+":not(."+h+")",x),S=P.length,Ge(),Ze(),S>ve.show?(qe(),ve.useDots&&Le(),ve.infinite&&Ye()):Ae()},et=function(){l=parseInt(Math.floor(o.width()),10),k=parseInt(Math.floor(o.height()),10),g.css(le,l+"px")},tt=function(){g=e("<div/>",{"class":f}),et();var t="<div/>",n=o.prop("tagName").toUpperCase(),s=!1;if(("UL"===n||"OL"===n)&&(s=!0,t="<"+n+"/>"),x=e(t,{"class":v}),P.appendTo(x),x.appendTo(g),s){var a=We(o),r=e("<div/>",a);g.appendTo(r),o.replaceWith(r),o=r}else o.empty(),g.appendTo(o);P.addClass(y).attr("tabindex",0),o.addClass(i).data(i,ve.name),ve.sideways||o.addClass(d),H=Je(e(P[0])),Ge()},nt=function(){le=ve.sideways?"width":"height",ve.show<ve.scroll&&(ve.scroll=ve.show,ye("sorry, you cant scroll more items than whats actually showing.")),oe||void 0!==e.easing[ve.easing]||(ye(ve.easing," is not supported, please include a jquery easing plugin or velocity"),ve.easing="swing"),ie=ve.sideways?"x":"y",ve.auto&&(ve.infinite=!0),ve.key&&(ve.sideways?(ve.keyBack=ve.keyBack||t,ve.keyForward=ve.keyForward||n):(ve.keyBack=ve.keyBack||s,ve.keyForward=ve.keyForward||a)),ve.usePrevNext&&(ve.prevClass=I+" "+_+" "+ve.prevClass,ve.nextClass=I+" "+z+" "+ve.nextClass,ve.prevIconClass=b+" "+ve.prevIconClass,ve.nextIconClass=b+" "+ve.nextIconClass),ve.usePausePlay&&(ve.pauseClass=I+" "+O+" "+ve.pauseClass,ve.playClass=I+" "+D+" "+ve.playClass,ve.pauseIconClass=b+" "+ve.pauseIconClass,ve.playIconClass=b+" "+ve.playIconClass),ve.useDots&&(ve.naviClass=w+" "+ve.naviClass,ve.dotClass=m+" "+ve.dotClass,ve.dotButtonClass=I+" "+N+" "+ve.dotButtonClass)},st=function(){T&&T.remove(),xe({duration:0,offset:0}),W=0,Q=0,J=0},at=function(t){return e.isEmptyObject(t)?ye("nothing to update carrotcell with..."):(Ue(),st(),e.extend(fe,t),e.extend(ve,B,fe),nt(),Ge(),Ze(),V&&Me(),!0)},ot=function(){var t=ve.breakpoints.length;if(t>0){var n=e(window).width(),s={};e.extend(s,pe),console.log("width ",n," scope w ",e(o).width());for(var a=0;t>a;a++){var r=ve.breakpoints[a];r.pixels>=n&&(e.extend(s,r.settings),console.log("apply breakpoint ",r))}return s}return{}},rt=function(t){if(K)return ye(ve.name+" has already been initalized, please use update to make changes.");o=t.scope,e.extend(fe,t),e.extend(ve,B,fe),e.extend(pe,ve);var n=ot();return e.isEmptyObject(n)||e.extend(ve,n),P=o.children(),oe=void 0===e(o).velocity?!1:!0,S=P.length,nt(),tt(),Ze(),V&&Me(),K=!0,!0},it={init:function(e){return rt(e)},keyPressed:function(e){return Ee(e)},resize:function(){return Xe()},update:function(e){return at(e)},insert:function(e,t){return Ce(e,t)},remove:function(e,t){return we(e,t)},moveToItem:function(e){return _e(e)},getName:function(){return ve.name},getCount:function(){return S},getShowing:function(e){return ke(e)}};return it},F={carrots:{},keys:{},count:0,initialized:!1,useKey:!1,touch:!1,error:function(){var e=Array.prototype.slice.call(arguments);e.unshift("[ CARROTCELL ERROR ]"),console.log.apply(null,e)},triggerCarrots:function(e){for(var t in F.carrots)"function"==typeof F.carrots[t][e]&&F.carrots[t][e]()},unsubscribeKeys:function(e){for(var t in F.keys){var n=F.keys[t].indexOf(e);n>-1&&F.keys[t].splice(n,1)}},subscribeKey:function(t){F.useKey||(e(window).keyup(F.keyPressed),F.useKey=!0);var n=t.shift();t.forEach(function(e){e in F.keys?F.keys[e].push(n):F.keys[e]=[n]})},keyPressed:function(e){e.keyCode in F.keys&&F.keys[e.keyCode].forEach(function(t){F.carrots[t].keyPressed(e.keyCode)})},windowResized:S(function(){F.triggerCarrots("resize")},r),makeCarrot:function(t){F.count++,t||(t={}),t.userOptions=JSON.stringify(t),t.scope=e(this),t.name="carrot-"+F.count+"-"+t.scope.attr("id");var n=new H;return F.carrots[t.name]=n,n.init(t),n},init:function(){e(window).on("resize",F.windowResized),("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&(F.touch=!0),F.initialize=!0}};e.fn.carrotCell=function(){if(0===this.length)return F.error("Nothing to call CarrotCell on, check your jquery selector."),!1;F.initialize||F.init();var t=e(this).data(l);if(t)return t.update.apply(this,arguments),t;var n=F.makeCarrot.apply(this,arguments),s=n.getName();return F.carrots[s]=n,e(this).data(l,n),n}}(jQuery);