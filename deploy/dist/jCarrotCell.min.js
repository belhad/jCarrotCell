/*!
 * jCarrotCell
 * http://jcarrotcell.yujulia.com
 * 
 * Copyright 2011, 2015 
 * Released under the MIT license
 *
 */
!function(e){var t=37,n=39,s=38,a=40,o=80,r=200,i=75,u="carrotcell",l=u+"__api",c=u+"__enum",d=u+"--on",p=u+"--vertical",f=u+"--invisible",v=u+"__clip",h=u+"__strip",y=u+"__item",C=u+"__clone",w=u+"__accessText",m=u+"__navi",b=u+"__dot",x=u+"__icon",g=x+"--next",k=x+"--prev",T=x+"--pause",I=x+"--play",P=x+"--dot",O=u+"__btn",z=O+"--next",_=O+"--prev",D=O+"--pause",N=O+"--play",B=O+"--dot",E={show:1,scroll:1,duration:500,sideways:!0,easing:"swing",infinite:!1,auto:!1,autoDuration:2e3,pauseOnHover:!0,controlOnHover:!1,dotsOnHover:!1,useDots:!1,naviClass:"",dotClass:"",dotIconClass:P,dotButtonClass:"",dotText:"item set ",onClass:d,usePausePlay:!0,pauseClass:"",pauseIconClass:T,pauseText:"pause auto scroll",playClass:"",playIconClass:I,playText:"resume auto scroll",usePrevNext:!0,prevClass:"",prevIconClass:k,prevText:"next item set",nextClass:"",nextIconClass:g,nextText:"previous item set",key:!1,keyBack:"",keyForward:"",keyToggle:o,broke:!1,breakpoints:[]},H=function(e,t){var n=null;return function(){var s=this,a=arguments,o=function(){n=null,e.apply(s,a)};clearTimeout(n),n=setTimeout(o,t)}},S=function(e){return e===parseInt(e,10)?!0:!1},j=function(e,t){var n=e.indexOf(t);return 0>n?!1:!0},L=function(){var o=null,l=0,g=0,k=null,T=null,I=null,P=null,H=0,L=null,K=!1,R=null,A=null,M=null,q=null,U=e(),W=[],X=0,Y=0,J=0,Q=!1,V=!0,G=!1,Z=1,$=0,ee=!1,te=!1,ne=null,se=null,ae=0,oe=[],re=!1,ie=!1,ue="x",le="width",ce=!1,de=!1,pe=null,fe={},ve={},he={},ye=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(he.name),F.error.apply(null,e),!1},Ce=function(e){var t='"'+e+'" is not a valid index. Please use a integer between 0 and '+H;return S(e)?0>e?ye(t):e>=H?ye(t):!0:ye(t)},we=function(t,n){if(null===t||"string"!=typeof t&&"object"!=typeof t)return ye("Unable to insert that kind of item. Please use a string or jquery object");Ce(n)||(n=H-1);var s=e("<div/>").append(t),a=s.children();return a.addClass(y).attr("tabindex",0),n===H-1?(a.insertAfter(P[H-1]),n++):a.insertBefore(P[n]),tt(),ze(n),n},me=function(t,n){var s=function(t){var n=function(){t.remove(),tt()};re?e(t).velocity("fadeOut",{duration:250,complete:n}):e(t).fadeOut("fast",n)};if(Ce(t)){if(n&&Ce(n)){if(n===t)return s(e(P[t])),t;if(t>n){var a=n;n=t,t=a}for(var o=e(),r=t;n>=r;r++)o=o.add(P[r]);return s(o),[t,n]}return s(e(P[t])),t}return!1},be=function(){V?(R.prop("disabled",!0),A.prop("disabled")&&A.prop("disabled",!1)):G?(A.prop("disabled",!0),R.prop("disabled")&&R.prop("disabled",!1)):(R.prop("disabled")&&R.prop("disabled",!1),A.prop("disabled")&&A.prop("disabled",!1))},xe=function(t){se.removeClass(he.onClass);var n=function(t){var n=oe.indexOf(t);e(se[n]).addClass(he.onClass)};t.forEach(n)},ge=function(e){if(e)return W;var t=W.map(function(e){return 0>e?H+e:e>=H?H-e:e});return t},ke=function(){ee=!1,te=!1,V=!1,G=!1;for(var e=[],t=0;t<he.show;t++)W[t]=X+t,W[t]<=0&&(V=!0),W[t]>=H-1&&(G=!0),W[t]<0&&(ee=!0),W[t]>H-1&&(te=!0);if(he.useDots&&oe.length){for(var n=ge(),s=0;s<he.show;s++)j(oe,n[s])&&e.push(n[s]);xe(e)}},Te=function(t){var n={axis:ue,container:k,duration:he.speed,easing:he.easing};if(e.extend(n,t),re)T.velocity("scroll",n);else{var s={scrollTop:n.offset};he.sideways&&(s={scrollLeft:n.offset}),k.animate(s,n.duration,n.easing,n.complete)}},Ie=function(){ie=!0,X=H+X,Y=he.show+X,Te({duration:0,offset:Y*L.totalSize}),ke(),ie=!1},Pe=function(e){ie=!0,X=W[0]-H,Y=he.show+X,Te({duration:0,offset:Y*L.totalSize}),ke(),ie=!1},Oe=function(e){S(e)?X=e:X+=Z*J,Y+=Z*J,ke(),he.infinite?ee?(Z=-1,Ie()):te&&(Z=1,Pe()):be(),ie=!1},ze=function(e){if(ie=!0,S(e)){var t=ge()[0];if(t===e)return ye(e," is currently shown.");t>e?(Z=-1,J=t-e):(!he.infinite&&e>$&&(e=$),Z=1,J=e-t)}else if(he.infinite)J=he.scroll;else{var n=he.scroll*Z+Y;J=n>$?he.scroll-(n-$):0>n?he.scroll+n:he.scroll}var s={offset:Z*J*L.totalSize+Y*L.totalSize,complete:Oe.bind(this,e)};Te(s)},_e=function(e){return Ce(e)?(ze(e),e):!1},De=function(e){return e&&e.preventDefault(),V&&!he.infinite||ie?!1:(Z=-1,ee&&Ie(),void ze())},Ne=function(e){return e&&e.preventDefault(),G&&!he.infinite||ie?!1:(Z=1,te&&Pe(),void ze())},Be=function(){pe&&clearTimeout(pe),pe=setTimeout(He,he.autoDuration)},Ee=function(){pe&&clearTimeout(pe)},He=function(){de||Ne(),ce&&Be()},Se=function(e){e&&e.preventDefault(),ce=!ce,ce?(he.usePausePlay&&q&&(q.prop("disabled",!0).hide(),M.prop("disabled",!1).show().focus()),Be()):(he.usePausePlay&&q&&(M.prop("disabled",!0).hide(),q.prop("disabled",!1).show().focus()),Ee())},je=function(e){return S(e)?(e===he.keyBack&&De(),e===he.keyForward&&Ne(),e===he.keyToggle&&Se(),!0):ye(e," is not a valid key. Please use an integer keycode.")},Le=function(){var e=null,t=null,n=function(){he.controlOnHover&&U.removeClass(f),he.dotsOnHover&&ne.removeClass(f),he.pauseOnHover&&(de=!0)},s=function(){he.controlOnHover&&U.addClass(f).blur(),he.dotsOnHover&&ne.addClass(f).blur(),he.pauseOnHover&&(de=!1)},a=function(){e&&clearTimeout(e),t&&clearTimeout(t)},i=function(){a(),e=setTimeout(n,r)},u=function(){a(),t=setTimeout(s,r)};s(),o.hover(i,u)},Fe=function(){var t=e("<span/>",{"class":he.prevIconClass,"aria-hidden":"true"}),n=e("<span/>",{"class":he.nextIconClass,"aria-hidden":"true"}),s=e("<span/>",{"class":w,text:he.prevText}),a=e("<span/>",{"class":w,text:he.nextText});R=e("<button/>",{"class":he.prevClass}),A=e("<button/>",{"class":he.nextClass}),R.append(t).append(s),A.append(a).append(n),V&&!he.infinite&&R.prop("disabled",!0),F.touch?(R.on("touchend",De),A.on("touchend",Ne)):(R.click(De),A.click(Ne)),o.prepend(A).prepend(R),U=U.add(R).add(A)},Ke=function(){var t=e("<span/>",{"class":he.pauseIconClass,"aria-hidden":"true"}),n=e("<span/>",{"class":he.playIconClass,"aria-hidden":"true"}),s=e("<span/>",{"class":w,text:he.pauseText}),a=e("<span/>",{"class":w,text:he.playText});M=e("<button/>",{"class":he.pauseClass}),q=e("<button/>",{"class":he.playClass}),M.append(t).append(s),q.append(n).append(a);var r=e().add(q).add(M),i=function(){r.blur()},u=function(e){Se(),i()};F.touch?(q.on("touchend",u),M.on("touchend",u)):(q.click(Se),M.click(Se),r.mouseleave(i)),o.prepend(M).prepend(q),U=U.add(q).add(M)},Re=function(t){var n=e(this).data(c);return X===n?!1:(ze(n),se.removeClass(d),void e(this).addClass(d))},Ae=function(){var t=e("."+m,o);t.length&&t.remove(),oe=[],ne=e("<ol/>",{"class":m});for(var n=null,s=0;ae>s;s++){var a=s*he.scroll;if(n!==a){var r=e("<li/>",{"class":he.dotClass}),i=e("<button/>",{"class":he.dotButtonClass}),u=e("<span/>",{"class":he.dotIconClass,"aria-hidden":"true"}),l=e("<span/>",{"class":w,text:he.dotText+s});i.data(c,a).append(u).append(l),F.touch?i.on("touchend",Re):i.click(Re),r.append(i),ne.append(r),oe.push(a),n=a}}se=e("."+B,ne),o.prepend(ne),ke()},Me=function(){var e=0,t=0,n=function(t){he.propagateTouch||t.preventDefault(),e=parseInt(he.sideways?t.changedTouches[0].clientX:t.changedTouches[0].clientY)},s=function(n){he.propagateTouch||n.preventDefault(),t=parseInt(he.sideways?n.changedTouches[0].clientX:n.changedTouches[0].clientY);var s=Math.abs(t-e);s>i&&(t>e?De():Ne())};T[0].addEventListener("touchstart",n,!1),T[0].addEventListener("touchend",s,!1),he.pauseOnHover&&T[0].addEventListener("touchend",Ee,!1)},qe=function(){(he.usePrevNext||he.usePausePlay)&&U.prop("disabled",!0),he.useDots&&se.prop("disabled",!0)},Ue=function(){(he.usePrevNext||he.usePausePlay)&&U.prop("disabled",!1),he.useDots&&se.prop("disabled",!1)},We=function(){if(he.usePrevNext&&Fe(),he.key&&!he.touch){var e=[he.name];he.usePrevNext&&(e.push(he.keyBack),e.push(he.keyForward)),he.usePausePlay&&e.push(he.keyToggle),F.subscribeKey(e)}he.useDots&&Ae(),he.auto&&(he.usePausePlay&&Ke(),Se()),F.touch||Le()},Xe=function(){pe&&(clearTimeout(pe),pe=null),(he.usePrevNext||he.usePausePlay)&&(U.remove(),U=e()),he.useDots&&ne.remove(),he.key&&F.unsubscribeKeys(he.name)},Ye=function(t){var n={};return e.each(t[0].attributes,function(e,t){n[t.nodeName]=t.nodeValue}),n},Je=function(t){var n=0;if(he.sideways){var s=parseInt(t.css("margin-left"),10),a=parseInt(t.css("margin-right"),10);n=s+a}else{var o=parseInt(t.css("margin-top"),10),r=parseInt(t.css("margin-bottom"),10);n=o>r?o:r}if("content-box"===e(t).css("box-sizing"))if(he.sideways){var i=parseInt(t.css("border-left-width"),10),u=parseInt(t.css("border-right-width"),10);n+=i+u}else{var l=parseInt(t.css("border-top-width"),10),c=parseInt(t.css("border-bottom-width"),10);n+=l+c}return{w:t.outerWidth(!0),h:t.outerHeight(!0),offset:n}},Qe=function(){var e=he.sideways?l/he.show:g/he.show;L.totalSize=e,L.size=e-L.offset,P.css(le,L.size+"px"),he.sideways||P.css("width",l-L.offset+"px")},Ve=function(){var e=H;he.infinite&&(I.css(le,L.size+"px"),e+=2*he.show),T.css(le,L.totalSize*e+"px")},Ge=function(){he.infinite&&$e(),Qe(),Ve(),he.infinite&&Te({duration:0,offset:he.show*L.totalSize})},Ze=function(){nt();var t=it();if(e.isEmptyObject(t))if(broke)broke=!1,rt(fe);else if(Ge(),he.infinite)Te({duration:0,offset:(X+he.show)*L.totalSize});else{if(0===W[0])return!1;Te({duration:0,offset:X*L.totalSize})}else broke=!0,rt(t);return!0},$e=function(){e("."+C,T).remove();var t=P.slice(-1*he.show).clone(),n=P.slice(0,he.show).clone();t.addClass(C).attr("tabindex",-1),n.addClass(C).attr("tabindex",-1),P.filter(":first").before(t),P.filter(":last").after(n),P=e("."+y+":not(."+C+")",o),I=e("."+C,o),Y=he.show},et=function(){ae=Math.ceil(H/he.scroll),$=H-he.show,ke(),ae>1&&(Q=!0)},tt=function(){P=e("."+y+":not(."+C+")",T),H=P.length,Ge(),et(),H>he.show?(Ue(),he.useDots&&Ae(),he.infinite&&$e()):qe()},nt=function(){l=parseInt(Math.floor(o.width()),10),g=parseInt(Math.floor(o.height()),10),he.sideways?k.css(le,l+"px"):k.css(le,g+"px")},st=function(){k=e("<div/>",{"class":v}),nt();var t="<div/>",n=o.prop("tagName").toUpperCase(),s=!1;if(("UL"===n||"OL"===n)&&(s=!0,t="<"+n+"/>"),T=e(t,{"class":h}),P.appendTo(T),T.appendTo(k),s){var a=Ye(o),r=e("<div/>",a);k.appendTo(r),o.replaceWith(r),o=r}else o.empty(),k.appendTo(o);P.addClass(y).attr("tabindex",0),o.addClass(u).data(u,he.name),he.sideways||o.addClass(p),L=Je(e(P[0])),Ge()},at=function(){le=he.sideways?"width":"height",he.show<he.scroll&&(he.scroll=he.show,ye("sorry, you cant scroll more items than whats actually showing.")),re||void 0!==e.easing[he.easing]||(ye(he.easing," is not supported, please include a jquery easing plugin or velocity"),he.easing="swing"),ue=he.sideways?"x":"y",he.auto&&(he.infinite=!0),he.key&&(he.sideways?(he.keyBack=he.keyBack||t,he.keyForward=he.keyForward||n):(he.keyBack=he.keyBack||s,he.keyForward=he.keyForward||a)),he.usePrevNext&&(he.prevClass=O+" "+_+" "+he.prevClass,he.nextClass=O+" "+z+" "+he.nextClass,he.prevIconClass=x+" "+he.prevIconClass,he.nextIconClass=x+" "+he.nextIconClass),he.usePausePlay&&(he.pauseClass=O+" "+D+" "+he.pauseClass,he.playClass=O+" "+N+" "+he.playClass,he.pauseIconClass=x+" "+he.pauseIconClass,he.playIconClass=x+" "+he.playIconClass),he.useDots&&(he.naviClass=m+" "+he.naviClass,he.dotClass=b+" "+he.dotClass,he.dotButtonClass=O+" "+B+" "+he.dotButtonClass)},ot=function(){I&&I.remove(),Te({duration:0,offset:0}),X=0,J=0,Y=0},rt=function(t){return e.isEmptyObject(t)?ye("nothing to update carrotcell with..."):(Xe(),ot(),e.extend(ve,t),e.extend(he,E,ve),at(),Ge(),et(),Q&&(We(),F.touch&&Me()),!0)},it=function(){var t=he.breakpoints.length,n=function(e,t){return e.pixels>t.pixels?-1:e.pixels<t.pixels?1:0};if(t>0){var s=e(window).width(),a={};e.extend(a,fe),he.breakpoints.sort(n);for(var o=0;t>o;o++){var r=he.breakpoints[o];r.pixels>=s&&e.extend(a,r.settings)}return a}return{}},ut=function(t){if(K)return ye(he.name+" has already been initalized, please use update to make changes.");o=t.scope,e.extend(ve,t),e.extend(he,E,ve),e.extend(fe,he);var n=it();return e.isEmptyObject(n)||e.extend(he,n),P=o.children(),re=void 0===e(o).velocity?!1:!0,H=P.length,at(),st(),et(),Q&&(We(),F.touch&&Me()),K=!0,!0},lt={init:function(e){return ut(e)},keyPressed:function(e){return je(e)},resize:function(){return Ze()},update:function(e){return rt(e)},insert:function(e,t){return we(e,t)},remove:function(e,t){return me(e,t)},moveToItem:function(e){return _e(e)},getName:function(){return he.name},getCount:function(){return H},getShowing:function(e){return ge(e)}};return lt},F={carrots:{},keys:{},count:0,initialized:!1,useKey:!1,touch:!1,error:function(){var e=Array.prototype.slice.call(arguments);e.unshift("[ CARROTCELL ERROR ]"),console.log.apply(null,e)},triggerCarrots:function(e){for(var t in F.carrots)"function"==typeof F.carrots[t][e]&&F.carrots[t][e]()},unsubscribeKeys:function(e){for(var t in F.keys){var n=F.keys[t].indexOf(e);n>-1&&F.keys[t].splice(n,1)}},subscribeKey:function(t){F.useKey||(e(window).keyup(F.keyPressed),F.useKey=!0);var n=t.shift();t.forEach(function(e){e in F.keys?F.keys[e].push(n):F.keys[e]=[n]})},keyPressed:function(e){e.keyCode in F.keys&&F.keys[e.keyCode].forEach(function(t){F.carrots[t].keyPressed(e.keyCode)})},windowResized:H(function(){F.triggerCarrots("resize")},r),makeCarrot:function(t){F.count++,t||(t={}),t.userOptions=JSON.stringify(t),t.scope=e(this),t.name="carrot-"+F.count+"-"+t.scope.attr("id");var n=new L;return F.carrots[t.name]=n,n.init(t),n},init:function(){e(window).on("resize",F.windowResized),("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&(F.touch=!0),F.initialize=!0}};e.fn.carrotCell=function(){if(0===this.length)return F.error("Nothing to call CarrotCell on, check your jquery selector."),!1;F.initialize||F.init();var t=e(this).data(l);if(t)return t.update.apply(this,arguments),t;var n=F.makeCarrot.apply(this,arguments),s=n.getName();return F.carrots[s]=n,e(this).data(l,n),n}}(jQuery);